<!DOCTYPE html>
<html>
<head>
	<title> Cherish Khang - Handman Game </title>
	<link rel="stylesheet" href="assets/css/reset.css">
	<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<h1>Hangman</h1>

<div id="weapon"></div>
<div id="underscores"></div>
<div id="displayGuessedLetters"></div>

<script>
/* ------------------------------------------------------------------------
 * Variables
 * ------------------------------------------------------------------------ */

//Word List
var word = [
	'Mani Katti',
	'Sol Katti',
	'Durandal',
	'Wolf Beil',
	'Armads',
	'Forblaze',
	'Flametongue', 
	'Sieglinde',
	'Shamshir',
	'Reginleif',
	'Siegmund',
	'Dragonstone',
	'Regal Sword',
	'Ragnell',
	'Amiti',
	'Alondite',
	'Gurgurant',
	'Rolf\'s Bow',
	'Onager',
	'Ettard',
	'Florete',
	'Caladbolg',
	'Tarvos',
	'Lughnasadh',
	'Cymbeline',
	'Thani',
	'Creiddylad',
	'Falchion',
	'Missiletainn',
	'Amatsu',
	'Wolf Berg'
	]
var randomNumber; //Variable for random number
var chosenWord = ""; //Variable to pick word using random number
var underscores = []; //Array to display blank underscores
var displayUnderscores = ""; //Nice display of contents from underscores array with spaces and without commas
var allowedLetters = /[a-z]/i; //Only pushes letters to guessedLetters array
var guessedLetters = []; //Array for user guessedLetters
var userGuess; //Most current user guess

/* ------------------------------------------------------------------------
 * Functions
 * ------------------------------------------------------------------------ */

//Function to start game
function pickWord() {
	//Pick random number
	randomNumber = Math.floor(Math.random()*word.length);
	//Find word based on random number
	chosenWord = word[randomNumber];

	//Create array for blank underscores based on chosen word
	for (var i = 0; i < chosenWord.length; i++) {
		if (chosenWord.charAt(i) == " ") {
			underscores.push("\xa0");
		}
		else if (chosenWord.charAt(i) == "'") {
			underscores.push("'");
		}
		else {
			underscores.push("_");
		}
	}
}

//Create nice display for contents in underscores array
function createDisplayUnderscores() {
	displayUnderscores = "";
	for (var i = 0; i < underscores.length; i++) {
		if (chosenWord.charAt(i) == " " || chosenWord.charAt(i) == "'") {
			displayUnderscores = displayUnderscores + underscores[i];
		}
		else {
			displayUnderscores = displayUnderscores + " " + underscores[i];
		}
	}
	document.getElementById('underscores').innerHTML = displayUnderscores;
}

//Show correct image and blank underscores for chosen word
function showImageAndUnderscores() {
	document.getElementById('weapon').innerHTML = '<img src="assets/images/weapons/' + randomNumber + '.png" class="weapon">';
	document.getElementById('underscores').innerHTML = displayUnderscores;
	console.log(chosenWord + ": " + displayUnderscores);
}

//Checks to see if a letter has already been guessed
function alreadyGuessed() {
	var checkIfGuessed = guessedLetters.indexOf(userGuess);

	if (checkIfGuessed == -1) {
		return false;
	}
	else return true;
}

//Takes user guessedLetters out of array and displays letters in all caps with spaces
function displayGuessedLetters() {
	var displayLetters = "";
	for (var i = 0; i < guessedLetters.length; i++) {
		displayLetters = displayLetters + " " + guessedLetters[i].toUpperCase();
	}
	return displayLetters;
}

function game() {
	pickWord();
	createDisplayUnderscores();
	showImageAndUnderscores();
}

//Restarts game by reseting underscore variable and calls startGame()
function restartGame() {
	underscores = [];
	displayUnderscores = "";
	game();
}

/* ------------------------------------------------------------------------
 * Start Game
 * ------------------------------------------------------------------------ */

//Initialize game
game();

//When a key is pressed
document.onkeypress = function(event) {
	userGuess = String.fromCharCode(event.keyCode).toLowerCase();

	//Checks if key pressed is a letter. If yes, then run code
	if (userGuess.match(allowedLetters)) {
		for (var i = 0; i < chosenWord.length; i++) {
			if (userGuess == chosenWord.charAt(i)) {
				underscores.splice(i,1,userGuess);
				createDisplayUnderscores();
				console.log(chosenWord + ": " + displayUnderscores);
			}
		}
		// //If first guess, add to guessedLetters array
		// if (guessedLetters.length == 0) {
		// 	guessedLetters.push(userGuess);
		// }
		// //If not first guess, see if already in array. If not, add to array.
		// else {
		// 	alreadyGuessed();
		// 	if (alreadyGuessed() == false) {
		// 		guessedLetters.push(userGuess);
		// 	}
		// }
	}

	document.getElementById('displayGuessedLetters').innerHTML = displayGuessedLetters();

}

</script>

<button onclick="restartGame()">Reset Game</button>

</body>
</html>